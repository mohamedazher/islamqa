import{r as k,b as ie,v as ue,e as b,l as e,p as Q,i as A,t as g,u as D,K as de,F as M,m as N,q as ce,B as O,D as ge,o as v,n as P,f as me}from"./vendor-goXqKlOD.js";import{c as ve,a as pe,u as be,b as fe,_}from"./index-C2EJApSe.js";import{l as W}from"./leaderboardService-BAmpFpHg.js";class xe{constructor(){this.db=ve}async getDailyQuiz(){try{const a=new Date().toISOString().split("T")[0],s=a.split("-").reduce((n,x)=>n+parseInt(x),0),o=await this.db.getAllQuizQuestions();if(o.length===0)throw new Error("No quiz questions available. Please generate quiz questions first.");const r=o.map(n=>n.reference),h=(await Promise.all(r.map(n=>this.db.getQuestion(n)))).filter(n=>n!==null);if(h.length===0)throw new Error("No questions found for available quiz questions.");const c=this.selectWithSeed(h,Math.min(5,h.length),s),y=(await Promise.all(c.map(n=>this.transformToQuizQuestion(n)))).filter(n=>n!==null);if(y.length===0)throw new Error("No quiz questions available for daily quiz. Please generate quiz questions first.");return{id:`daily-${a}`,name:"Daily Quiz",description:"Your daily Islamic knowledge challenge",mode:"daily",questions:y,timeLimit:null,points:50}}catch(a){throw console.error("Error generating daily quiz:",a),a}}async getRapidFireQuiz(a={}){try{const{difficulty:s="all",categories:o=[]}=a,r=await this.db.getAllQuizQuestions();if(console.log(`üéØ [Rapid Fire] Found ${r.length} quiz questions in database`),r.length===0)throw new Error("No quiz questions available. Please generate quiz questions first.");const p=r.map(x=>x.reference);console.log("üéØ [Rapid Fire] Question references:",p.slice(0,10));let c=(await Promise.all(p.map(x=>this.db.getQuestion(x)))).filter(x=>x!==null);if(console.log(`üéØ [Rapid Fire] Found ${c.length} full questions (after filtering nulls)`),o&&o.length>0){const x=[];for(const f of o){const w=await this.db.getAllDescendantCategoryReferences(f);x.push(...w)}const m=[...new Set(x)];console.log(`üéØ [Rapid Fire] Expanded ${o.length} categories to ${m.length} (including subcategories)`),c=c.filter(f=>f.primary_category&&m.includes(f.primary_category)||f.categories&&f.categories.some(w=>m.includes(w))),console.log(`üéØ [Rapid Fire] After category filter: ${c.length} questions`)}if(c.length===0)throw new Error("No quiz questions available for the selected criteria.");const l=this.shuffleArray([...c]).slice(0,Math.min(20,c.length));console.log(`üéØ [Rapid Fire] Selected ${l.length} questions for quiz`);const n=(await Promise.all(l.map(x=>this.transformToQuizQuestion(x)))).filter(x=>x!==null);if(console.log(`üéØ [Rapid Fire] After transform: ${n.length} quiz questions`),n.length===0)throw new Error("No quiz questions available for rapid-fire quiz. Please generate quiz questions first.");return{id:`rapid-fire-${Date.now()}`,name:"Rapid Fire",description:`${n.length} quick questions - answer fast!`,mode:"rapid-fire",questions:n,timeLimit:60,pointsPerQuestion:5}}catch(s){throw console.error("Error generating rapid-fire quiz:",s),s}}async getCategoryQuiz(a,s=10,o="all"){try{const r=typeof a=="string"?parseInt(a,10):a,p=await this.db.getAllQuizQuestions();if(p.length===0)throw new Error("No quiz questions available. Please generate quiz questions first.");const h=p.map(f=>f.reference),c=await Promise.all(h.map(f=>this.db.getQuestion(f))),l=await this.db.getAllDescendantCategoryReferences(r),y=c.filter(f=>f!==null&&(f.primary_category&&l.includes(f.primary_category)||f.categories&&f.categories.some(w=>l.includes(w))));if(y.length===0)throw new Error("No quiz questions available for this category. Please generate quiz questions first.");const n=this.shuffleArray([...y]).slice(0,Math.min(s,y.length)),m=(await Promise.all(n.map(f=>this.transformToQuizQuestion(f)))).filter(f=>f!==null);if(m.length===0)throw new Error("No quiz questions available for this category. Please generate quiz questions first.");return{id:`category-${r}-${Date.now()}`,name:"Category Quiz",description:"Test your knowledge in this category",mode:"category",questions:m,categoryReference:r,timeLimit:null,points:m.length*10}}catch(r){throw console.error("Error generating category quiz:",r),r}}async getCustomQuiz(a={}){try{const{categories:s=[],difficulty:o="all",count:r=10}=a,p=await this.db.getAllQuizQuestions();if(p.length===0)throw new Error("No quiz questions available. Please generate quiz questions first.");const h=p.map(m=>m.reference);let l=(await Promise.all(h.map(m=>this.db.getQuestion(m)))).filter(m=>m!==null);if(s.length>0){const m=[];for(const w of s){const R=await this.db.getAllDescendantCategoryReferences(w);m.push(...R)}const f=[...new Set(m)];l=l.filter(w=>w.primary_category&&f.includes(w.primary_category)||w.categories&&w.categories.some(R=>f.includes(R)))}if(l.length===0)throw new Error("No quiz questions available for the selected criteria.");const y=this.shuffleArray([...l]).slice(0,Math.min(r,l.length)),x=(await Promise.all(y.map(m=>this.transformToQuizQuestion(m)))).filter(m=>m!==null);if(x.length===0)throw new Error("No quiz questions available. Please generate quiz questions first.");return{id:`custom-${Date.now()}`,name:"Custom Quiz",description:`${x.length} questions${s.length>0?" from selected categories":""}`,mode:"custom",questions:x,selectedCategories:s,timeLimit:null,points:x.length*10}}catch(s){throw console.error("Error generating custom quiz:",s),s}}async getChallengeQuiz(){try{const a=await this.db.getAllQuizQuestions();if(a.length===0)throw new Error("No quiz questions available. Please generate quiz questions first.");const s=a.map(l=>l.reference),r=(await Promise.all(s.map(l=>this.db.getQuestion(l)))).filter(l=>l!==null);if(r.length===0)throw new Error("No questions found for available quiz questions.");const p=this.shuffleArray([...r]).slice(0,Math.min(15,r.length)),c=(await Promise.all(p.map(l=>this.transformToQuizQuestion(l)))).filter(l=>l!==null);if(c.length===0)throw new Error("No quiz questions available for challenge quiz. Please generate quiz questions first.");return{id:`challenge-${Date.now()}`,name:"Challenge Mode",description:`Test your Islamic knowledge - ${c.length} challenging questions`,mode:"challenge",questions:c,timeLimit:90,points:c.length*10}}catch(a){throw console.error("Error generating challenge quiz:",a),a}}async loadPreGeneratedQuizzes(){try{const a=await fetch("/data/quiz-questions.json");if(!a.ok)throw new Error(`Failed to load quiz questions: ${a.statusText}`);const s=await a.json();let o=Array.isArray(s)?s:s.quizzes||[];return console.log(`‚úÖ Loaded ${o.length} pre-generated quizzes`),o}catch(a){throw console.error("Error loading pre-generated quizzes:",a),a}}async getAvailableCategories(){try{const a=await this.db.getCategories(null);return console.log(`Found ${a.length} available categories for quiz`),a}catch(a){return console.error("Error getting available categories:",a),[]}}calculateScore(a,s){try{let o=0;const r=[];a.questions.forEach((y,n)=>{const x=s[n],m=x===y.correctOptionId;m&&o++,r.push({questionReference:y.reference,userAnswerIndex:x,isCorrect:m,correctOptionIndex:y.correctOptionId,pointsEarned:m?y.points||10:0})});const p=a.questions.length,h=Math.round(o/p*100),c=a.questions.reduce((y,n)=>y+(n.points||10),0);return{score:r.reduce((y,n)=>y+n.pointsEarned,0),correct:o,total:p,accuracy:h,maxScore:c,results:r,feedback:this.generateFeedback(h)}}catch(o){throw console.error("Error calculating score:",o),o}}async saveQuizAttempt(a,s,o){try{const r={quiz_config_id:a.id,answers:s,correct:o.correct,total:o.total,accuracy:o.accuracy,points:o.score,timestamp:Date.now(),session_id:this.generateSessionId()},p=await this.db.saveQuizAttempt(r);return console.log(`‚úÖ Saved quiz attempt with ID: ${p}`),p}catch(r){throw console.error("Error saving quiz attempt:",r),r}}async getQuizStats(){try{return await this.db.getQuizStats()}catch(a){return console.error("Error getting quiz stats:",a),{total_attempts:0,average_score:0,total_points:0}}}async transformToQuizQuestion(a){const s=await this.db.getQuizQuestion(a.reference);if(!s)return console.log(`‚ö†Ô∏è  Question ${a.reference} not generated yet (skipping)`),null;console.log(`üìö Loading quiz question ${a.reference}`),s.options.findIndex(p=>p.isCorrect);const o=this.shuffleArray([...s.options]),r=o.findIndex(p=>p.isCorrect);return{reference:a.reference,questionText:s.questionText,question:a.question,answer:a.answer,explanation:s.explanation,primaryCategory:a.primary_category,categories:a.categories,options:o,correctOptionId:r,points:s.points||10,tags:s.tags,difficulty:s.difficulty}}generateFeedback(a){return a===100?"üåü Perfect score! Excellent knowledge!":a>=80?"üëè Great job! Very good understanding":a>=60?"‚úÖ Good effort! Keep learning":a>=40?"üìö Keep practicing, you're making progress":"üí™ Don't give up! Try again to improve"}shuffleArray(a){const s=[...a];for(let o=s.length-1;o>0;o--){const r=Math.floor(Math.random()*(o+1));[s[o],s[r]]=[s[r],s[o]]}return s}selectWithSeed(a,s,o){const r=o%Math.max(a.length-s,1);return a.slice(r,r+s)}generateSessionId(){return`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}const he={class:"quiz-view h-full flex flex-col bg-neutral-50 dark:bg-neutral-950"},ye={class:"bg-gradient-to-r from-primary-600 to-primary-800 dark:from-primary-700 dark:to-primary-900 text-white p-4 shadow"},ke={key:0,class:"flex items-center justify-between gap-2"},we={class:"flex items-center gap-2 min-w-0"},ze={class:"text-right flex-shrink-0"},qe={class:"text-lg sm:text-2xl font-bold"},Qe={key:1,class:"flex items-center justify-between gap-3"},_e={class:"text-sm sm:text-lg font-bold truncate"},Ce={class:"text-right flex-shrink-0"},Ae={class:"text-sm sm:text-base font-bold"},$e={class:"flex-1 overflow-y-auto p-4"},Re={key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4"},Se={key:1,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4"},Ee={class:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto"},Ie={class:"p-4 space-y-6"},Fe={class:"grid grid-cols-4 gap-2"},Pe=["onClick"],Te={class:"flex items-center justify-between mb-3"},De={key:0,class:"bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 rounded-lg p-4"},Me={key:1,class:"space-y-2"},Ne=["onClick"],je={class:"flex items-center gap-3"},Le={class:"flex-1 text-center"},Oe={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},Ve={class:"sticky bottom-0 bg-white dark:bg-neutral-900 border-t dark:border-neutral-800 p-4 space-y-2"},Ge=["disabled"],Be={key:2,class:"space-y-4"},He={key:0,class:"bg-white dark:bg-neutral-900 rounded-lg shadow dark:shadow-neutral-800/50 p-8 text-center"},Ue={key:1},Ye=["disabled"],We={class:"flex items-center justify-between mb-2"},Ke={class:"flex items-center gap-2"},Je={class:"flex items-center gap-1 text-xs text-accent-600 dark:text-accent-400 mt-2"},Xe=["disabled"],Ze={class:"flex items-center justify-between mb-2"},et={class:"flex items-center gap-2"},tt=["disabled"],rt={class:"flex items-center justify-between mb-2"},at={class:"flex items-center gap-2"},st=["disabled"],ot={class:"flex items-center justify-between mb-2"},lt={class:"flex items-center gap-2"},nt={class:"bg-white dark:bg-neutral-900 rounded-lg shadow dark:shadow-neutral-800/50 p-4 mt-6"},it={class:"flex items-center gap-2 mb-3"},ut={class:"grid grid-cols-3 gap-4 text-center"},dt={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},ct={class:"text-2xl font-bold text-accent-600 dark:text-accent-400"},gt={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},mt={key:3,class:"space-y-4"},vt={class:"bg-white dark:bg-neutral-900 rounded-lg shadow dark:shadow-neutral-800/50 p-3"},pt={class:"flex items-center justify-between mb-2"},bt={class:"text-sm text-neutral-600 dark:text-neutral-400"},ft={class:"w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-2"},xt={class:"bg-white dark:bg-neutral-900 rounded-lg shadow dark:shadow-neutral-800/50 p-6"},ht={key:0,class:"mb-3"},yt={class:"inline-flex items-center gap-1 px-2 py-1 bg-primary-50 dark:bg-primary-950/30 text-primary-700 dark:text-primary-300 rounded text-xs"},kt={class:"text-base sm:text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-4"},wt={class:"space-y-2"},zt=["onClick","disabled"],qt={class:"flex items-center gap-2 sm:gap-3"},Qt={class:"flex-1"},_t={key:1,class:"mt-4 p-3 bg-primary-50 dark:bg-primary-950/30 rounded-lg border-l-4 border-primary-500 dark:border-primary-600"},Ct={class:"text-sm text-primary-900 dark:text-primary-100"},At={key:4,class:"space-y-4"},$t={class:"bg-white dark:bg-neutral-900 rounded-lg shadow dark:shadow-neutral-800/50 p-6 text-center"},Rt={class:"text-3xl font-bold mb-2 text-neutral-900 dark:text-neutral-100"},St={class:"grid grid-cols-3 gap-4 mb-6"},Et={class:"bg-primary-50 dark:bg-primary-950/30 rounded-lg p-4"},It={class:"text-3xl font-bold text-primary-600 dark:text-primary-400"},Ft={class:"bg-accent-50 dark:bg-accent-950/30 rounded-lg p-4"},Pt={class:"text-3xl font-bold text-accent-600 dark:text-accent-400"},Tt={class:"bg-primary-50 dark:bg-primary-950/30 rounded-lg p-4"},Dt={class:"text-3xl font-bold text-primary-600 dark:text-primary-400"},Mt={class:"mt-6 space-y-3"},Nt={class:"flex items-start gap-3"},jt={class:"flex-1 min-w-0"},Lt={class:"font-medium text-neutral-900 dark:text-neutral-100 mb-2"},Ot={class:"space-y-1 text-sm"},Vt={key:0,class:"flex items-center gap-2 text-green-700 dark:text-green-400"},Gt=["onClick"],Bt={key:0,class:"bg-accent-50 dark:bg-accent-950/30 border border-accent-200 dark:border-accent-800 rounded-lg p-4 mb-4"},Ht={key:0,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 overflow-y-auto"},Ut={class:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto my-8"},Yt={class:"sticky top-0 bg-white dark:bg-neutral-900 border-b dark:border-neutral-800 p-4 flex items-center justify-between"},Wt={class:"p-6 space-y-6"},Kt={class:"text-2xl font-bold text-neutral-900 dark:text-neutral-100 mb-4"},Jt={class:"prose dark:prose-invert max-w-none"},Xt={class:"bg-primary-50 dark:bg-primary-950/30 border-l-4 border-primary-500 dark:border-primary-600 p-4 rounded"},Zt=["innerHTML"],er={class:"prose dark:prose-invert max-w-none"},tr={class:"bg-accent-50 dark:bg-accent-950/30 border-l-4 border-accent-500 dark:border-accent-600 p-4 rounded"},rr=["innerHTML"],ar={__name:"QuizView",setup(K){const a=ge(),s=be(),o=fe(),r=k(null),p=k(null),h=k(0),c=k(null),l=k(!1),y=k(!1),n=k(null),x=k([]),m=k([]),f=k(null),w=k(!1),R=k(!1),C=k([]),z=k([]),T=k("all"),$=k(10),V=k("custom"),S=k(!0),L=k(!1),E=k(null),I=k(null),q=ie(()=>!r.value||h.value>=r.value.questions.length?null:r.value.questions[h.value]);function J(){localStorage.getItem("quiz-guide-seen")||(R.value=!0)}function X(){localStorage.setItem("quiz-guide-seen","true"),R.value=!1}async function j(){if(!q.value){I.value=null;return}try{let u=q.value.primaryCategory,t=null;if(u&&(t=await s.getCategory(u)),!t&&q.value.categories&&q.value.categories.length>0){console.log(`‚ö†Ô∏è  Primary category ${u} not found - trying fallback categories`);for(const d of q.value.categories)if(t=await s.getCategory(d),t){u=d,console.log(`‚úÖ Using fallback category ${d}: ${t.title}`);break}}if(!t){console.log("‚ö†Ô∏è  No valid categories found for question - skipping breadcrumb"),I.value=null;return}const i=[];if(t.ancestors&&t.ancestors.length>0)for(const d of t.ancestors){const F=await s.getCategory(d);F?i.push(F.title):console.log(`‚ö†Ô∏è  Ancestor category ${d} not found - skipping in breadcrumb`)}i.push(t.title),I.value={reference:t.reference,title:t.title,breadcrumb:i.join(" > ")}}catch(u){console.error("Error loading category for question:",u),I.value=null}}function G(u){console.log("üé® Opening customization modal:",u),console.log("  - Available categories:",C.value.map(t=>`${t.reference}: ${t.title}`)),console.log("  - Quiz service ready:",p.value!==null),V.value=u,u==="rapid-fire"?$.value=20:$.value=10,z.value=[...C.value],T.value="all",console.log("  - Selected categories after reset:",z.value.map(t=>`${t.reference}: ${t.title}`)),w.value=!0}function Z(){w.value=!1}function ee(u){const t=z.value.findIndex(i=>i.reference===u.reference);t>-1?z.value.splice(t,1):z.value.push(u)}function te(){z.value.length===C.value.length?z.value=[]:z.value=[...C.value]}async function re(){if(z.value.length!==0)try{const u=z.value.map(t=>t.reference);V.value==="rapid-fire"?r.value=await p.value.getRapidFireQuiz({categories:u,difficulty:T.value}):r.value=await p.value.getCustomQuiz({categories:u,difficulty:T.value,count:$.value,mode:"custom"}),h.value=0,c.value=null,l.value=!1,m.value=[],f.value=Date.now(),w.value=!1,await j()}catch(u){console.error("Error starting custom quiz:",u),alert("Failed to load custom quiz. Please try again.")}}async function ae(){try{r.value=await p.value.getDailyQuiz(),h.value=0,c.value=null,l.value=!1,m.value=[],f.value=Date.now(),await j()}catch(u){console.error("Error starting daily quiz:",u),alert("Failed to load daily quiz. Please try again.")}}async function se(){try{r.value=await p.value.getChallengeQuiz(),h.value=0,c.value=null,l.value=!1,m.value=[],f.value=Date.now(),await j()}catch(u){console.error("Error starting challenge quiz:",u),alert("Failed to load challenge quiz. Please try again.")}}function oe(u){l.value||(c.value=u,l.value=!0)}async function B(u){try{const t=await s.getQuestion(u);t&&(E.value=t,L.value=!0)}catch(t){console.error("Error loading full question:",t),alert("Failed to load question details.")}}function H(){L.value=!1,E.value=null}async function le(){m.value.push(c.value),h.value<r.value.questions.length-1?(h.value++,c.value=null,l.value=!1,await j()):ne()}async function ne(){n.value=p.value.calculateScore(r.value,m.value);const u=o.unlockedAchievements.length;o.completeQuiz(n.value.score,n.value.accuracy);const t=o.unlockedAchievements.length-u;x.value=o.unlockedAchievements.slice(-t);try{const i=f.value?Math.floor((Date.now()-f.value)/1e3):0;await W.submitScore({score:n.value.score,correct:n.value.correct,total:n.value.total,accuracy:n.value.accuracy,quizId:r.value.id,mode:r.value.mode,timeTaken:i}),console.log("‚úÖ Score submitted to leaderboard")}catch(i){console.error("‚ö†Ô∏è Failed to submit score to leaderboard:",i)}y.value=!0,console.log("‚úÖ Quiz completed!",{answers:m.value,results:n.value})}function U(){r.value=null,y.value=!1,n.value=null,x.value=[],c.value=null,l.value=!1,h.value=0,m.value=[]}function Y(){r.value&&!y.value?confirm("Are you sure? Your progress will be lost.")&&U():a.back()}return ue(async()=>{try{console.log("üéØ Initializing Quiz View (new database-driven system)..."),J(),o.initializeFromStorage();try{await W.initUser(),console.log("  ‚úÖ Leaderboard service initialized")}catch(t){console.error("  ‚ö†Ô∏è Failed to initialize leaderboard:",t)}p.value=new xe,console.log("  ‚úÖ Quiz service initialized (using database)"),console.log("  üîÑ Loading available categories from database...");const u=await p.value.getAvailableCategories();C.value=u||[],z.value=[...C.value],S.value=!1,console.log("  ‚úÖ Quiz view ready"),console.log(`  - Available categories: ${C.value.length}`),console.log("  - Categories:",C.value.map(t=>`${t.reference}: ${t.title}`).join(", ")),console.log("üéØ Quiz view initialized successfully!")}catch(u){console.error("‚ùå FATAL ERROR initializing quiz view:",u),S.value=!1,alert(`Failed to initialize quiz: ${u.message}

Please check the console for details.`)}}),(u,t)=>(v(),b("div",he,[e("header",ye,[e("button",{onClick:Y,class:"hover:opacity-80 transition-opacity mb-3"},[A(_,{name:"arrowLeft",size:"md"})]),r.value?(v(),b("div",Qe,[e("h1",_e,g(r.value.name),1),e("div",Ce,[e("div",Ae,g(h.value+1)+"/"+g(r.value.questions.length),1),t[7]||(t[7]=e("div",{class:"text-xs text-primary-100"},"Questions",-1))])])):(v(),b("div",ke,[e("div",we,[A(_,{name:"lightning",size:"sm",class:"flex-shrink-0"}),t[5]||(t[5]=e("h1",{class:"text-sm sm:text-lg font-bold truncate"},"Quiz Mode",-1))]),e("div",ze,[e("div",qe,g(D(o).points),1),t[6]||(t[6]=e("div",{class:"text-xs text-primary-100"},"Points",-1))])]))]),e("div",$e,[R.value?(v(),b("div",Re,[e("div",{class:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl max-w-md w-full p-6"},[t[8]||(t[8]=de('<h2 class="text-2xl font-bold text-neutral-900 dark:text-neutral-100 mb-4" data-v-dc0a3061>Welcome to Quiz Mode!</h2><div class="space-y-4 text-neutral-700 dark:text-neutral-300" data-v-dc0a3061><div data-v-dc0a3061><h3 class="font-semibold text-primary-600 dark:text-primary-400 mb-1" data-v-dc0a3061>üéØ How It Works</h3><p class="text-sm" data-v-dc0a3061>Test your Islamic knowledge with various quiz modes. Choose categories and difficulty levels to customize your learning experience.</p></div><div data-v-dc0a3061><h3 class="font-semibold text-primary-600 dark:text-primary-400 mb-1" data-v-dc0a3061>üìö Quiz Modes</h3><ul class="text-sm space-y-1 list-disc list-inside" data-v-dc0a3061><li data-v-dc0a3061><strong data-v-dc0a3061>Daily Quiz:</strong> 5 questions, same for everyone</li><li data-v-dc0a3061><strong data-v-dc0a3061>Rapid Fire:</strong> 20 quick questions, timed</li><li data-v-dc0a3061><strong data-v-dc0a3061>Category Quiz:</strong> Choose topics that interest you</li><li data-v-dc0a3061><strong data-v-dc0a3061>Challenge:</strong> Harder questions for advanced learners</li></ul></div><div data-v-dc0a3061><h3 class="font-semibold text-primary-600 dark:text-primary-400 mb-1" data-v-dc0a3061>‚≠ê Earn Points</h3><p class="text-sm" data-v-dc0a3061>Complete quizzes to earn points, maintain streaks, and unlock achievements. Track your progress and level up!</p></div></div>',2)),e("button",{onClick:X,class:"w-full bg-primary-600 dark:bg-primary-700 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-700 dark:hover:bg-primary-600 transition mt-6"}," Get Started ")])])):Q("",!0),w.value?(v(),b("div",Se,[e("div",Ee,[t[16]||(t[16]=e("div",{class:"sticky top-0 bg-white dark:bg-neutral-900 border-b dark:border-neutral-800 p-4"},[e("h2",{class:"text-base sm:text-lg font-bold text-neutral-900 dark:text-neutral-100"},"Customize Quiz")],-1)),e("div",Ie,[e("div",null,[t[9]||(t[9]=e("h3",{class:"font-semibold text-neutral-900 dark:text-neutral-100 mb-3"},"Difficulty Level",-1)),e("div",Fe,[(v(),b(M,null,N(["all","easy","medium","hard"],i=>e("button",{key:i,onClick:d=>T.value=i,class:P(["px-3 py-2 rounded-lg text-sm font-medium transition",T.value===i?"bg-primary-600 dark:bg-primary-700 text-white":"bg-neutral-100 dark:bg-neutral-800 text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-700"])},g(i.charAt(0).toUpperCase()+i.slice(1)),11,Pe)),64))])]),e("div",null,[e("div",Te,[t[10]||(t[10]=e("h3",{class:"font-semibold text-neutral-900 dark:text-neutral-100"},"Categories",-1)),C.value.length>0?(v(),b("button",{key:0,onClick:te,class:"text-sm text-primary-600 dark:text-primary-400 hover:underline"},g(z.value.length===C.value.length?"Deselect All":"Select All"),1)):Q("",!0)]),C.value.length===0?(v(),b("div",De,[...t[11]||(t[11]=[e("p",{class:"text-sm text-red-900 dark:text-red-100"},"‚ö†Ô∏è No categories available. Check console for errors.",-1)])])):(v(),b("div",Me,[(v(!0),b(M,null,N(C.value,i=>(v(),b("button",{key:i.reference,onClick:d=>ee(i),class:P(["w-full px-3 py-2 rounded-lg text-sm text-left transition flex items-center justify-between",z.value.some(d=>d.reference===i.reference)?"bg-primary-50 dark:bg-primary-950/30 border-2 border-primary-600 dark:border-primary-700 text-primary-900 dark:text-primary-100":"bg-neutral-50 dark:bg-neutral-800 border-2 border-transparent text-neutral-700 dark:text-neutral-300 hover:bg-neutral-100 dark:hover:bg-neutral-700"])},[e("span",null,g(i.title),1),z.value.some(d=>d.reference===i.reference)?(v(),me(_,{key:0,name:"check",size:"xs",class:"text-primary-600 dark:text-primary-400"})):Q("",!0)],10,Ne))),128))]))]),e("div",null,[t[15]||(t[15]=e("h3",{class:"font-semibold text-neutral-900 dark:text-neutral-100 mb-3"},"Number of Questions",-1)),e("div",je,[e("button",{onClick:t[0]||(t[0]=i=>$.value=Math.max(5,$.value-5)),class:"w-10 h-10 rounded-lg bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 flex items-center justify-center"},[...t[12]||(t[12]=[e("span",{class:"text-xl font-bold"},"-",-1)])]),e("div",Le,[e("div",Oe,g($.value),1),t[13]||(t[13]=e("div",{class:"text-xs text-neutral-600 dark:text-neutral-400"},"questions",-1))]),e("button",{onClick:t[1]||(t[1]=i=>$.value=Math.min(50,$.value+5)),class:"w-10 h-10 rounded-lg bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 flex items-center justify-center"},[...t[14]||(t[14]=[e("span",{class:"text-xl font-bold"},"+",-1)])])])])]),e("div",Ve,[e("button",{onClick:re,disabled:z.value.length===0,class:"w-full bg-primary-600 dark:bg-primary-700 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-700 dark:hover:bg-primary-600 transition disabled:opacity-50 disabled:cursor-not-allowed"}," Start Quiz ",8,Ge),e("button",{onClick:Z,class:"w-full bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 px-6 py-3 rounded-lg font-semibold hover:bg-neutral-300 dark:hover:bg-neutral-700 transition"}," Cancel ")])])])):Q("",!0),r.value?r.value&&!y.value?(v(),b("div",mt,[e("div",vt,[e("div",pt,[t[35]||(t[35]=e("span",{class:"text-sm font-medium text-neutral-700 dark:text-neutral-300"},"Progress",-1)),e("span",bt,g(h.value+1)+"/"+g(r.value.questions.length),1)]),e("div",ft,[e("div",{class:"bg-primary-600 dark:bg-primary-500 h-2 rounded-full transition-all duration-300",style:ce({width:(h.value+1)/r.value.questions.length*100+"%"})},null,4)])]),e("div",xt,[I.value?(v(),b("div",ht,[e("div",yt,[A(_,{name:"folder",size:"xs"}),e("span",null,g(I.value.breadcrumb),1)])])):Q("",!0),e("h3",kt,g(q.value.questionText),1),e("div",wt,[(v(!0),b(M,null,N(q.value.options,(i,d)=>(v(),b("button",{key:d,onClick:F=>oe(d),disabled:l.value,class:P(["w-full p-2 sm:p-3 rounded-lg border-2 text-left transition font-medium text-sm sm:text-base",{"border-primary-600 bg-primary-50 dark:bg-primary-950/30 text-primary-900 dark:text-primary-100":c.value===d&&!l.value,"border-accent-500 bg-accent-50 dark:bg-accent-950/30 text-accent-900 dark:text-accent-100":l.value&&d===q.value.correctOptionId,"border-red-500 bg-red-50 dark:bg-red-950/30 text-red-900 dark:text-red-100":l.value&&c.value===d&&d!==q.value.correctOptionId,"border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-neutral-900 dark:text-neutral-100 hover:border-primary-400 dark:hover:border-primary-600":!l.value&&c.value!==d,"border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 text-neutral-400 dark:text-neutral-600 cursor-not-allowed":l.value&&c.value!==d}])},[e("div",qt,[e("span",{class:P(["w-6 h-6 sm:w-8 sm:h-8 rounded-full border-2 flex items-center justify-center flex-shrink-0 text-xs sm:text-sm font-bold",{"border-primary-600 bg-primary-600 text-white":c.value===d&&!l.value,"border-accent-500 bg-accent-500 text-white":l.value&&d===q.value.correctOptionId,"border-red-500 bg-red-500 text-white":l.value&&c.value===d&&d!==q.value.correctOptionId}])},g(String.fromCharCode(65+d)),3),e("span",Qt,g(i.text),1)])],10,zt))),128))]),l.value?(v(),b("div",_t,[e("p",Ct,[t[36]||(t[36]=e("span",{class:"font-semibold"},"Explanation: ",-1)),O(" "+g(q.value.explanation),1)]),q.value.reference?(v(),b("button",{key:0,onClick:t[4]||(t[4]=i=>B(q.value.reference)),class:"mt-3 text-sm font-semibold text-primary-700 dark:text-primary-300 hover:underline flex items-center gap-1"},[A(_,{name:"book",size:"xs"}),t[37]||(t[37]=O(" Read full explanation ",-1))])):Q("",!0)])):Q("",!0)]),l.value?(v(),b("button",{key:0,onClick:le,class:"w-full bg-primary-600 dark:bg-primary-700 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-700 dark:hover:bg-primary-600 transition"},g(h.value<r.value.questions.length-1?"Next Question":"See Results"),1)):Q("",!0)])):y.value&&n.value?(v(),b("div",At,[e("div",$t,[e("h2",Rt,g(n.value.feedback),1),t[46]||(t[46]=e("p",{class:"text-neutral-600 dark:text-neutral-400 mb-4"},"Quiz completed!",-1)),e("div",St,[e("div",Et,[e("div",It,g(n.value.correct),1),t[38]||(t[38]=e("div",{class:"text-sm text-neutral-600 dark:text-neutral-400"},"Correct",-1))]),e("div",Ft,[e("div",Pt,g(n.value.accuracy)+"%",1),t[39]||(t[39]=e("div",{class:"text-sm text-neutral-600 dark:text-neutral-400"},"Accuracy",-1))]),e("div",Tt,[e("div",Dt,"+"+g(n.value.score),1),t[40]||(t[40]=e("div",{class:"text-sm text-neutral-600 dark:text-neutral-400"},"Points",-1))])]),e("div",Mt,[t[44]||(t[44]=e("h3",{class:"text-base sm:text-lg font-semibold text-neutral-900 dark:text-neutral-100 text-left mb-3"},"Review Your Answers",-1)),(v(!0),b(M,null,N(n.value.results,(i,d)=>{var F;return v(),b("div",{key:d,class:"bg-neutral-50 dark:bg-neutral-800 rounded-lg p-4 text-left"},[e("div",Nt,[e("div",{class:P(["flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm",i.isCorrect?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"])},g(i.isCorrect?"‚úì":"‚úó"),3),e("div",jt,[e("h4",Lt," Question "+g(d+1)+": "+g(r.value.questions[d].questionText),1),e("div",Ot,[e("div",{class:P(["flex items-center gap-2",i.isCorrect?"text-green-700 dark:text-green-400":"text-red-700 dark:text-red-400"])},[t[41]||(t[41]=e("span",{class:"font-semibold"},"Your answer:",-1)),e("span",null,g(((F=r.value.questions[d].options[i.userAnswerIndex])==null?void 0:F.text)||"No answer"),1)],2),i.isCorrect?Q("",!0):(v(),b("div",Vt,[t[42]||(t[42]=e("span",{class:"font-semibold"},"Correct answer:",-1)),e("span",null,g(r.value.questions[d].options[i.correctOptionIndex].text),1)]))]),r.value.questions[d].sourceQuestionId?(v(),b("button",{key:0,onClick:sr=>B(r.value.questions[d].sourceQuestionId),class:"mt-3 text-sm font-medium text-primary-600 dark:text-primary-400 hover:underline flex items-center gap-1"},[A(_,{name:"book",size:"xs"}),t[43]||(t[43]=O(" Read full explanation ",-1))],8,Gt)):Q("",!0)])])])}),128))]),x.value.length>0?(v(),b("div",Bt,[t[45]||(t[45]=e("p",{class:"font-semibold text-accent-900 dark:text-accent-100 mb-2"},"üéâ Achievement Unlocked!",-1)),(v(!0),b(M,null,N(x.value,i=>(v(),b("div",{key:i.id,class:"text-sm text-accent-800 dark:text-accent-200"},g(i.icon)+" "+g(i.name)+": +"+g(i.points)+" points ",1))),128))])):Q("",!0),e("button",{onClick:U,class:"w-full bg-primary-600 dark:bg-primary-700 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary-700 dark:hover:bg-primary-600 transition mb-2"}," Take Another Quiz "),e("button",{onClick:Y,class:"w-full bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 px-6 py-3 rounded-lg font-semibold hover:bg-neutral-300 dark:hover:bg-neutral-700 transition"}," Back to Home ")])])):Q("",!0):(v(),b("div",Be,[S.value?(v(),b("div",He,[...t[17]||(t[17]=[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-primary-200 dark:border-primary-800 border-t-primary-600 dark:border-t-primary-400 mb-4"},null,-1),e("p",{class:"text-neutral-600 dark:text-neutral-400"},"Loading quiz questions...",-1)])])):(v(),b("div",Ue,[t[34]||(t[34]=e("h2",{class:"text-base sm:text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-4"},"Choose a quiz mode:",-1)),e("button",{onClick:ae,disabled:S.value,class:"w-full bg-white dark:bg-neutral-900 rounded-lg shadow dark:shadow-neutral-800/50 p-5 text-left hover:shadow-md dark:hover:shadow-neutral-700/50 hover:bg-primary-50 dark:hover:bg-primary-950/30 transition disabled:opacity-50 disabled:cursor-not-allowed"},[e("div",We,[e("div",Ke,[A(_,{name:"star",size:"md",class:"text-primary-600 dark:text-primary-400"}),t[18]||(t[18]=e("h3",{class:"font-semibold text-neutral-900 dark:text-neutral-100 text-lg"},"Daily Quiz",-1))]),t[19]||(t[19]=e("span",{class:"text-xs bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 px-3 py-1 rounded-full"},"+50 pts",-1))]),t[20]||(t[20]=e("p",{class:"text-sm text-neutral-600 dark:text-neutral-400"},"5 questions ¬∑ Same quiz for all users today",-1)),e("div",Je,[A(_,{name:"fire",size:"xs"}),e("span",null,"Streak: "+g(D(o).streak)+" days",1)])],8,Ye),e("button",{onClick:t[2]||(t[2]=i=>G("rapid-fire")),disabled:S.value,class:"w-full bg-white dark:bg-neutral-900 rounded-lg shadow dark:shadow-neutral-800/50 p-5 text-left hover:shadow-md dark:hover:shadow-neutral-700/50 hover:bg-primary-50 dark:hover:bg-primary-950/30 transition disabled:opacity-50 disabled:cursor-not-allowed"},[e("div",Ze,[e("div",et,[A(_,{name:"lightning",size:"md",class:"text-accent-600 dark:text-accent-400"}),t[21]||(t[21]=e("h3",{class:"font-semibold text-neutral-900 dark:text-neutral-100 text-lg"},"Rapid Fire",-1))]),t[22]||(t[22]=e("span",{class:"text-xs bg-accent-100 dark:bg-accent-900/50 text-accent-700 dark:text-accent-300 px-3 py-1 rounded-full"},"+100 pts",-1))]),t[23]||(t[23]=e("p",{class:"text-sm text-neutral-600 dark:text-neutral-400"},"20 questions ¬∑ 60 seconds ¬∑ Customize topics",-1))],8,Xe),e("button",{onClick:t[3]||(t[3]=i=>G("custom")),disabled:S.value,class:"w-full bg-white dark:bg-neutral-900 rounded-lg shadow dark:shadow-neutral-800/50 p-5 text-left hover:shadow-md dark:hover:shadow-neutral-700/50 hover:bg-primary-50 dark:hover:bg-primary-950/30 transition disabled:opacity-50 disabled:cursor-not-allowed"},[e("div",rt,[e("div",at,[A(_,{name:"book",size:"md",class:"text-primary-600 dark:text-primary-400"}),t[24]||(t[24]=e("h3",{class:"font-semibold text-neutral-900 dark:text-neutral-100 text-lg"},"Custom Quiz",-1))]),t[25]||(t[25]=e("span",{class:"text-xs bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 px-3 py-1 rounded-full"},"Variable pts",-1))]),t[26]||(t[26]=e("p",{class:"text-sm text-neutral-600 dark:text-neutral-400"},"Choose categories & difficulty",-1))],8,tt),e("button",{onClick:se,disabled:S.value,class:"w-full bg-white dark:bg-neutral-900 rounded-lg shadow dark:shadow-neutral-800/50 p-5 text-left hover:shadow-md dark:hover:shadow-neutral-700/50 hover:bg-primary-50 dark:hover:bg-primary-950/30 transition border-2 border-primary-400 dark:border-primary-600 disabled:opacity-50 disabled:cursor-not-allowed"},[e("div",ot,[e("div",lt,[A(_,{name:"star",size:"md",class:"text-primary-600 dark:text-primary-400"}),t[27]||(t[27]=e("h3",{class:"font-semibold text-neutral-900 dark:text-neutral-100 text-lg"},"Challenge Mode",-1))]),t[28]||(t[28]=e("span",{class:"text-xs bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 px-3 py-1 rounded-full"},"+150 pts",-1))]),t[29]||(t[29]=e("p",{class:"text-sm text-neutral-600 dark:text-neutral-400"},"15 questions ¬∑ Tougher questions",-1))],8,st),e("div",nt,[e("div",it,[A(_,{name:"document",size:"md",class:"text-primary-600 dark:text-primary-400"}),t[30]||(t[30]=e("h3",{class:"font-semibold text-neutral-900 dark:text-neutral-100"},"Your Stats",-1))]),e("div",ut,[e("div",null,[e("div",dt,g(D(o).stats.quizzesCompleted),1),t[31]||(t[31]=e("div",{class:"text-xs text-neutral-600 dark:text-neutral-400"},"Quizzes",-1))]),e("div",null,[e("div",ct,g(D(o).stats.avgAccuracy)+"%",1),t[32]||(t[32]=e("div",{class:"text-xs text-neutral-600 dark:text-neutral-400"},"Accuracy",-1))]),e("div",null,[e("div",gt,g(D(o).currentLevel),1),t[33]||(t[33]=e("div",{class:"text-xs text-neutral-600 dark:text-neutral-400"},"Level",-1))])])])]))]))]),L.value&&E.value?(v(),b("div",Ht,[e("div",Ut,[e("div",Yt,[t[47]||(t[47]=e("h2",{class:"text-base sm:text-lg font-bold text-neutral-900 dark:text-neutral-100"},"Full Question",-1)),e("button",{onClick:H,class:"p-2 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-lg transition"},[A(_,{name:"close",size:"md"})])]),e("div",Wt,[e("div",null,[e("h3",Kt,g(E.value.title),1)]),e("div",Jt,[e("div",Xt,[t[48]||(t[48]=e("h4",{class:"text-sm font-semibold text-primary-900 dark:text-primary-100 mb-2"},"Question",-1)),e("div",{class:"text-neutral-800 dark:text-neutral-200",innerHTML:E.value.question},null,8,Zt)])]),e("div",er,[e("div",tr,[t[49]||(t[49]=e("h4",{class:"text-sm font-semibold text-accent-900 dark:text-accent-100 mb-2"},"Answer",-1)),e("div",{class:"text-neutral-800 dark:text-neutral-200",innerHTML:E.value.answer},null,8,rr)])])]),e("div",{class:"sticky bottom-0 bg-white dark:bg-neutral-900 border-t dark:border-neutral-800 p-4"},[e("button",{onClick:H,class:"w-full bg-neutral-200 dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 px-6 py-3 rounded-lg font-semibold hover:bg-neutral-300 dark:hover:bg-neutral-700 transition"}," Close ")])])])):Q("",!0)]))}},ir=pe(ar,[["__scopeId","data-v-dc0a3061"]]);export{ir as default};
