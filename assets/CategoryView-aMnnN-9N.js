import{r as f,L as N,v as j,s as q,e as s,l as e,i as l,t as p,p as k,B,F as Q,m as S,j as D,D as E,o,n as I,f as P}from"./vendor-goXqKlOD.js";import{a as R,u as F,_ as c}from"./index-C2EJApSe.js";import{Q as T}from"./QuestionListItem-Ny9Qfla_.js";const G={class:"category-view h-full flex flex-col bg-neutral-50 dark:bg-neutral-950"},M={class:"bg-gradient-to-r from-primary-600 to-primary-800 dark:from-primary-700 dark:to-primary-900 text-white p-3 sm:p-4 shadow flex items-center"},A={class:"flex-1 min-w-0"},H={class:"text-base sm:text-lg font-bold line-clamp-2 break-words"},J={class:"text-primary-100 dark:text-primary-200 text-xs truncate"},K={class:"flex-1 overflow-y-auto p-3 sm:p-4"},O={key:0,class:"flex items-center justify-center h-64"},U={key:1,class:"space-y-6"},W={key:0},X={class:"text-base sm:text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-3 sm:mb-4 flex items-center gap-2"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4"},Z=["onClick"],ee={class:"relative"},te={class:"flex items-start gap-3"},re={class:"flex-shrink-0 w-12 h-12 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center group-hover:scale-110 transition-transform"},ae={class:"flex-1 min-w-0"},oe={class:"font-bold text-white line-clamp-2 break-words mb-2 leading-snug"},se={class:"text-xs text-white/90 flex items-center gap-2"},ne={class:"bg-white/20 backdrop-blur-sm px-2 py-0.5 rounded-full"},ie={key:1},le={class:"text-base sm:text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-3 flex items-center gap-2"},ce={class:"grid grid-cols-1 gap-3"},de={key:2,class:"text-center py-12"},ue={class:"w-20 h-20 bg-neutral-100 dark:bg-neutral-800 rounded-full flex items-center justify-center mx-auto mb-4"},me={__name:"CategoryView",setup(ge){const v=E(),x=D(),d=F(),n=f(null),u=f([]),m=f([]),y=f(!0),_=f(""),h=N({});function b(r,t){return r>0?`${r} subcategories â€¢ ${t} questions`:`${t} questions`}const w=async()=>{try{y.value=!0;const r=x.params.id;if(n.value=await d.getCategory(r),n.value){const[t,g]=await Promise.all([d.getCategoriesByParent(n.value.reference),d.getQuestionsByCategory(n.value.reference)]);u.value=t,m.value=g,_.value=b(t.length,g.length);for(const a of t)try{const[i,C]=await Promise.all([d.getCategoriesByParent(a.reference),d.getQuestionsByCategory(a.reference)]);h[a.reference]=b(i.length,C.length)}catch(i){console.error(`Error loading summary for subcategory ${a.reference}:`,i),h[a.reference]="Error loading"}console.log("Category ID:",r),console.log("Current Category:",n.value),console.log("Subcategories:",u.value),console.log("Questions:",m.value)}}catch(r){console.error("Error loading category:",r)}finally{y.value=!1}};j(w),q(()=>x.params.id,w);function $(r){const t=["from-primary-400 via-primary-500 to-accent-500 dark:from-primary-600 dark:via-accent-600 dark:to-accent-700","from-yellow-400 via-orange-400 to-red-400 dark:from-yellow-500 dark:via-orange-500 dark:to-red-500","from-accent-400 via-accent-500 to-accent-600 dark:from-accent-600 dark:via-accent-700 dark:to-accent-800","from-pink-400 via-purple-400 to-indigo-500 dark:from-pink-500 dark:via-purple-500 dark:to-indigo-600","from-amber-400 via-primary-400 to-primary-500 dark:from-amber-600 dark:via-primary-600 dark:to-primary-700","from-orange-400 via-rose-400 to-pink-500 dark:from-orange-500 dark:via-rose-500 dark:to-pink-600","from-purple-400 via-blue-400 to-indigo-500 dark:from-purple-500 dark:via-blue-500 dark:to-indigo-600","from-green-400 via-lime-400 to-yellow-400 dark:from-green-500 dark:via-lime-500 dark:to-yellow-500"];return t[r%t.length]}function z(){v.back()}function L(r){v.push(`/category/${r.reference}`)}function V(r){v.push(`/question/${r.reference}`)}return(r,t)=>{var g;return o(),s("div",G,[e("header",M,[e("button",{onClick:z,class:"mr-2 sm:mr-3 hover:opacity-80 transition-opacity flex-shrink-0"},[l(c,{name:"arrowLeft",size:"sm"})]),e("div",A,[e("h1",H,p(((g=n.value)==null?void 0:g.title)||"Category"),1),e("p",J,p(_.value),1)])]),e("div",K,[y.value?(o(),s("div",O,[...t[0]||(t[0]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 dark:border-primary-400 mx-auto"}),e("p",{class:"mt-4 text-neutral-600 dark:text-neutral-400"},"Loading...")],-1)])])):(o(),s("div",U,[u.value.length>0?(o(),s("div",W,[e("h3",X,[l(c,{name:"folder",size:"sm",class:"text-primary-600 dark:text-primary-400"}),t[1]||(t[1]=B(" Subcategories ",-1))]),e("div",Y,[(o(!0),s(Q,null,S(u.value,(a,i)=>(o(),s("div",{key:a.reference,onClick:C=>L(a),class:I(["group relative overflow-hidden bg-gradient-to-br rounded-xl shadow-md hover:shadow-xl dark:shadow-neutral-900/50 p-5 cursor-pointer transition-all duration-300 hover:scale-[1.02]",$(i)])},[t[2]||(t[2]=e("div",{class:"absolute -right-4 -top-4 w-24 h-24 rounded-full opacity-10 bg-white"},null,-1)),e("div",ee,[e("div",te,[e("div",re,[l(c,{name:"folder",size:"lg",class:"text-white"})]),e("div",ae,[e("h4",oe,p(a.title),1),e("p",se,[e("span",ne,p(h[a.reference]||"Loading..."),1)])]),l(c,{name:"chevronRight",size:"md",class:"text-white/70 group-hover:text-white transition-colors"})])])],10,Z))),128))])])):k("",!0),m.value.length>0?(o(),s("div",ie,[e("h3",le,[l(c,{name:"document",size:"md"}),t[3]||(t[3]=B(" Questions ",-1))]),e("div",ce,[(o(!0),s(Q,null,S(m.value,a=>(o(),P(T,{key:a.reference,question:a,onClick:i=>V(a)},null,8,["question","onClick"]))),128))])])):k("",!0),u.value.length===0&&m.value.length===0?(o(),s("div",de,[e("div",ue,[l(c,{name:"collection",size:"xl",class:"text-neutral-400 dark:text-neutral-600"})]),t[4]||(t[4]=e("h3",{class:"text-base sm:text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-2"},"No Content",-1)),t[5]||(t[5]=e("p",{class:"text-neutral-600 dark:text-neutral-400"},"This category has no subcategories or questions yet",-1))])):k("",!0)]))])])}}},ye=R(me,[["__scopeId","data-v-e3ac0f97"]]);export{ye as default};
