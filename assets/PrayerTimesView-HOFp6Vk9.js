import{r as u,v as V,x as U,b as G,e as n,l as t,p as x,i as l,t as r,n as f,F as W,m as q,D as R,o,B as L,q as A}from"./vendor-goXqKlOD.js";import{_ as d}from"./index-C2EJApSe.js";import{C as j}from"./CircularCountdown-mLldGJJz.js";import{p as c}from"./prayerTimesService-C3AToNJq.js";const E={class:"prayer-times-view h-full flex flex-col bg-neutral-50 dark:bg-neutral-950"},H={class:"flex items-center gap-3 flex-1 min-w-0"},J={class:"min-w-0"},K={key:0,class:"text-white/80 text-xs md:text-sm truncate"},O={key:0,class:"flex-1 flex items-center justify-center p-4"},Q={class:"animate-pulse text-center"},X={key:1,class:"flex-1 flex items-center justify-center p-4"},Y={class:"text-center max-w-md"},Z={class:"w-20 h-20 bg-teal-100 dark:bg-teal-900/50 rounded-full flex items-center justify-center mx-auto mb-4"},tt={key:2,class:"flex-1 overflow-y-auto p-4 pb-20 lg:pb-4 space-y-4"},et={class:"bg-white dark:bg-neutral-900 rounded-lg shadow dark:shadow-neutral-800/50 p-4"},st={class:"text-center"},at={class:"text-2xl font-bold text-neutral-900 dark:text-neutral-100 mb-1"},nt={class:"text-sm text-neutral-600 dark:text-neutral-400"},lt={class:"flex items-center justify-between gap-4 mb-3"},ot={class:"flex items-center gap-3 flex-1"},rt={class:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center"},dt={class:"text-2xl font-bold"},it={class:"flex items-center justify-between text-sm bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2"},ut={class:"space-y-3"},ct={class:"p-4"},mt={class:"flex items-center justify-between mb-3"},xt={class:"flex items-center gap-3"},gt={class:"text-lg font-bold text-neutral-900 dark:text-neutral-100"},vt={class:"text-xs text-neutral-600 dark:text-neutral-400"},ft={class:"flex flex-col items-end gap-2"},bt={key:0,class:"inline-flex items-center gap-1 px-2 py-1 bg-teal-100 dark:bg-teal-900/50 text-teal-700 dark:text-teal-300 text-xs font-semibold rounded-full"},ht={key:1,class:"inline-flex items-center gap-1 px-2 py-1 bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400 text-xs font-medium rounded-full"},kt={key:2},_t={key:0,class:"mt-3"},pt={class:"h-2 bg-neutral-200 dark:bg-neutral-800 rounded-full overflow-hidden"},wt={class:"bg-neutral-100 dark:bg-neutral-900/50 rounded-lg p-4 border border-neutral-200 dark:border-neutral-800"},yt={class:"flex items-start gap-3"},Pt={class:"flex-1 text-sm"},St={class:"text-neutral-600 dark:text-neutral-400"},zt={key:3,class:"fixed bottom-20 lg:bottom-4 left-4 right-4 bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800/30 rounded-lg shadow-lg p-4"},Ct={class:"flex items-start gap-3"},Tt={class:"flex-1"},Lt={class:"text-sm text-red-900 dark:text-red-100"},Mt={__name:"PrayerTimesView",setup(jt){const P=R(),b=u(!0),v=u(!1),h=u([]),k=u(""),S=u(""),i=u(null),g=u(null),_=u(new Date),m=u(null),p=u("sun");let w=null,y=0;V(()=>{D(),w=setInterval(()=>{_.value=new Date,z(),y++,y>=60&&(c.updateWidget(),y=0,v.value&&(m.value=c.getTimePeriodGradient(),p.value=c.getTimePeriodIcon()))},1e3),setTimeout(()=>c.updateWidget(),1e3)}),U(()=>{w&&clearInterval(w)});const D=()=>{try{if(b.value=!0,g.value=null,c.reloadSettings(),v.value=c.hasLocation(),v.value){const s=c.getSettings();k.value=s.locationName,S.value=s.calculationMethodName,m.value=c.getTimePeriodGradient(),p.value=c.getTimePeriodIcon(),z()}}catch(s){console.error("Failed to load prayer times:",s),g.value=s.message}finally{b.value=!1}},z=()=>{try{h.value=c.getPrayerStatuses(),i.value=h.value.find(s=>s.status==="current")||null}catch(s){console.error("Failed to update prayer statuses:",s)}},F=G(()=>_.value.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})),I=s=>s.status==="current"?"border-2 border-teal-500 dark:border-teal-600":"",N=s=>s.status==="current"?"bg-teal-100 dark:bg-teal-900/50 text-teal-600 dark:text-teal-400":s.status==="past"?"bg-neutral-100 dark:bg-neutral-800 text-neutral-500 dark:text-neutral-600":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400",C=s=>({Fajr:"sun",Dhuhr:"sun",Asr:"sun",Maghrib:"moon",Isha:"moon"})[s]||"sun",M=s=>{if(s.status!=="current"||!s.countdown)return 0;const e=s.end-s.start,B=(Date.now()-s.start)/e*100;return Math.min(Math.max(B,0),100)},$=()=>{P.back()},T=()=>{P.push("/settings")};return(s,e)=>(o(),n("div",E,[t("header",{class:f(["bg-gradient-to-r text-white p-3 sm:p-4 shadow flex items-center transition-all duration-1000",m.value?`${m.value.from} ${m.value.via} ${m.value.to}`:"from-teal-600 to-cyan-600 dark:from-teal-700 dark:to-cyan-700"])},[t("button",{onClick:$,class:"mr-3 hover:opacity-80 transition-opacity"},[l(d,{name:"arrowLeft",size:"md"})]),t("div",H,[l(d,{name:p.value,size:"lg",class:"flex-shrink-0"},null,8,["name"]),t("div",J,[e[1]||(e[1]=t("h1",{class:"text-base sm:text-lg font-bold truncate"},"Prayer Times",-1)),k.value?(o(),n("p",K,r(k.value),1)):x("",!0)])]),t("button",{onClick:T,class:"text-white/80 hover:text-white transition-colors ml-2",title:"Prayer Settings"},[l(d,{name:"cog",size:"md"})])],2),b.value?(o(),n("div",O,[t("div",Q,[l(d,{name:"sun",size:"xl",class:"text-teal-600 dark:text-teal-400 mx-auto mb-2"}),e[2]||(e[2]=t("p",{class:"text-neutral-600 dark:text-neutral-400"},"Loading prayer times...",-1))])])):v.value?(o(),n("div",tt,[t("div",et,[t("div",st,[t("div",at,r(_.value.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})),1),t("div",nt,r(F.value),1)])]),i.value?(o(),n("div",{key:0,class:f(["bg-gradient-to-br text-white rounded-lg shadow-lg p-5 transition-all duration-1000",m.value?`${m.value.from} ${m.value.to}`:"from-teal-500 to-cyan-500 dark:from-teal-600 dark:to-cyan-600"])},[t("div",lt,[t("div",ot,[t("div",rt,[l(d,{name:C(i.value.name),size:"lg"},null,8,["name"])]),t("div",null,[e[5]||(e[5]=t("div",{class:"text-xs text-white/80 uppercase tracking-wide"},"Current Prayer",-1)),t("div",dt,r(i.value.name)+" Time",1)])]),t("div",null,[l(j,{hours:i.value.countdown.hours,minutes:i.value.countdown.minutes,seconds:i.value.countdown.seconds,"total-seconds":i.value.countdown.totalSeconds,size:100,"stroke-width":8,"progress-color":"white","bg-color":"rgba(255, 255, 255, 0.2)",label:"until end",format:"auto"},null,8,["hours","minutes","seconds","total-seconds"])])]),t("div",it,[t("span",null,r(i.value.startFormatted),1),e[6]||(e[6]=t("span",null,"â€”",-1)),t("span",null,r(i.value.endFormatted),1)])],2)):x("",!0),t("div",ut,[e[9]||(e[9]=t("h3",{class:"text-base sm:text-lg font-semibold text-neutral-900 dark:text-neutral-100 px-1"},"Today's Prayer Times",-1)),(o(!0),n(W,null,q(h.value,a=>(o(),n("div",{key:a.name,class:f(["bg-white dark:bg-neutral-900 rounded-lg shadow dark:shadow-neutral-800/50 overflow-hidden transition-all",I(a)])},[t("div",ct,[t("div",mt,[t("div",xt,[t("div",{class:f(["w-12 h-12 rounded-full flex items-center justify-center",N(a)])},[l(d,{name:C(a.name),size:"lg"},null,8,["name"])],2),t("div",null,[t("div",gt,r(a.name),1),t("div",vt,r(a.startFormatted)+" - "+r(a.endFormatted),1)])]),t("div",ft,[a.status==="current"?(o(),n("div",bt,[...e[7]||(e[7]=[t("div",{class:"w-2 h-2 bg-teal-600 dark:bg-teal-400 rounded-full animate-pulse"},null,-1),L(" Now ",-1)])])):a.status==="past"?(o(),n("div",ht,[l(d,{name:"check",size:"xs"}),e[8]||(e[8]=L(" Passed ",-1))])):x("",!0),a.countdown?(o(),n("div",kt,[l(j,{hours:a.countdown.hours,minutes:a.countdown.minutes,seconds:a.countdown.seconds,"total-seconds":a.countdown.totalSeconds,size:70,"stroke-width":6,"progress-color":a.status==="current"?"#14b8a6":"#10b981","bg-color":"rgba(20, 184, 166, 0.1)",label:a.countdown.type==="starts"?"until start":"until end",format:"auto"},null,8,["hours","minutes","seconds","total-seconds","progress-color","label"])])):x("",!0)])]),a.status==="current"?(o(),n("div",_t,[t("div",pt,[t("div",{class:"h-full bg-gradient-to-r from-teal-500 to-cyan-500 dark:from-teal-600 dark:to-cyan-600 transition-all duration-1000",style:A({width:M(a)+"%"})},null,4)])])):x("",!0)])],2))),128))]),t("div",wt,[t("div",yt,[l(d,{name:"info",size:"md",class:"text-neutral-600 dark:text-neutral-400 mt-0.5"}),t("div",Pt,[e[10]||(e[10]=t("div",{class:"font-medium text-neutral-900 dark:text-neutral-100 mb-1"}," Calculation Method ",-1)),t("div",St,r(S.value),1)])])])])):(o(),n("div",X,[t("div",Y,[t("div",Z,[l(d,{name:"globe",size:"xl",class:"text-teal-600 dark:text-teal-400"})]),e[3]||(e[3]=t("h2",{class:"text-base sm:text-lg font-bold text-neutral-900 dark:text-neutral-100 mb-2"},"Location Required",-1)),e[4]||(e[4]=t("p",{class:"text-neutral-600 dark:text-neutral-400 mb-6"}," Please set your location to view accurate prayer times for your area. ",-1)),t("button",{onClick:T,class:"px-6 py-3 bg-teal-600 dark:bg-teal-500 text-white rounded-lg hover:bg-teal-700 dark:hover:bg-teal-600 transition-colors font-medium"}," Set Location ")])])),g.value?(o(),n("div",zt,[t("div",Ct,[l(d,{name:"exclamation",size:"md",class:"text-red-600 dark:text-red-400 flex-shrink-0"}),t("div",Tt,[t("p",Lt,r(g.value),1)]),t("button",{onClick:e[0]||(e[0]=a=>g.value=null),class:"text-red-600 dark:text-red-400"},[l(d,{name:"close",size:"sm"})])])])):x("",!0)]))}};export{Mt as default};
