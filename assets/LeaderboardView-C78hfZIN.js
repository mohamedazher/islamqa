import{r as u,v as B,O as N,s as S,e as o,l as e,i as f,F as h,m as p,p as m,t as l,D as U,o as n,n as g,B as q}from"./vendor-goXqKlOD.js";import{_ as k}from"./index-C2EJApSe.js";import{l as x}from"./leaderboardService-BAmpFpHg.js";const R={class:"leaderboard-view h-full flex flex-col bg-neutral-50 dark:bg-neutral-950"},V={class:"bg-gradient-to-r from-amber-400 via-orange-400 to-red-400 dark:from-amber-500 dark:via-orange-500 dark:to-red-500 text-white p-3 sm:p-4 shadow"},j={class:"flex items-center gap-3"},E={class:"bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-800 px-4 pt-4"},F={class:"flex gap-2"},A=["onClick"],D={class:"flex-1 overflow-y-auto p-4 space-y-4"},M={key:0,class:"flex items-center justify-center py-12"},W={key:1,class:"bg-gradient-to-br from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 border border-amber-200 dark:border-amber-800 rounded-xl p-4"},Y={class:"flex items-center gap-4"},I={class:"bg-gradient-to-br from-amber-400 to-orange-400 text-white rounded-full w-12 h-12 flex items-center justify-center text-xl font-bold"},O={class:"flex-1"},G={class:"text-sm text-neutral-600 dark:text-neutral-400"},H={class:"text-right"},J={class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},K={class:"space-y-2"},P={class:"flex items-center gap-4"},Q={class:"flex-1 min-w-0"},X={class:"font-semibold text-neutral-900 dark:text-neutral-100 truncate"},Z={key:0,class:"text-xs text-amber-600 dark:text-amber-400 ml-2"},ee={key:0,class:"text-xs text-neutral-600 dark:text-neutral-400"},te={key:1,class:"text-xs text-neutral-600 dark:text-neutral-400"},ae={class:"text-right"},re={class:"text-xl font-bold text-amber-600 dark:text-amber-400"},se={key:2,class:"text-center py-12 px-4"},le={class:"text-neutral-600 dark:text-neutral-400 font-medium mb-2"},ce={__name:"LeaderboardView",setup(oe){const y=U(),w=[{id:"daily",label:"Today"},{id:"weekly",label:"This Week"},{id:"allTime",label:"All Time"}],s=u("daily"),i=u([]),b=u(!1),d=u(null),c=u(0),_=u("");B(async()=>{await z()}),N(async()=>{await v()}),S(s,()=>{v()});async function z(){try{await x.initUser(),_.value=x.username,await v()}catch(t){console.error("Failed to initialize leaderboard:",t)}}async function v(){b.value=!0;try{console.log(`ðŸ“Š Loading ${s.value} leaderboard...`),s.value==="daily"?i.value=await x.getDailyLeaderboard():s.value==="weekly"?i.value=await x.getWeeklyLeaderboard():i.value=await x.getAllTimeLeaderboard(),console.log(`âœ… Loaded ${i.value.length} entries`);const t=i.value.find(r=>r.isCurrentUser);t?(d.value=t.rank,c.value=s.value==="daily"?t.score||0:t.totalScore||0,console.log(`ðŸ‘¤ User rank: ${d.value}, score: ${c.value}`)):(d.value=null,c.value=0,console.log("ðŸ‘¤ User not found in leaderboard"))}catch(t){console.error("âŒ Failed to load leaderboard:",t),i.value=[],d.value=null,c.value=0}finally{b.value=!1}}function L(t){return t===1?"bg-gradient-to-br from-yellow-400 to-yellow-500 text-white":t===2?"bg-gradient-to-br from-gray-300 to-gray-400 text-white":t===3?"bg-gradient-to-br from-orange-400 to-orange-500 text-white":"bg-neutral-100 dark:bg-neutral-800 text-neutral-600 dark:text-neutral-400"}function C(t){return t===1?"ðŸ¥‡":t===2?"ðŸ¥ˆ":t===3?"ðŸ¥‰":`#${t}`}function T(){return s.value==="daily"?"No scores today yet":s.value==="weekly"?"No scores this week yet":"No scores yet. Be the first!"}function $(){y.back()}return(t,r)=>(n(),o("div",R,[e("header",V,[e("div",j,[e("button",{onClick:$,class:"lg:hidden hover:opacity-80 transition-opacity"},[f(k,{name:"arrowLeft",size:"md"})]),r[0]||(r[0]=e("div",{class:"flex-1"},[e("h1",{class:"text-base sm:text-lg font-bold"},"Leaderboard"),e("p",{class:"text-sm text-white/90"},"Compete with fellow learners")],-1)),f(k,{name:"trophy",size:"lg"})])]),e("div",E,[e("div",F,[(n(),o(h,null,p(w,a=>e("button",{key:a.id,onClick:ne=>s.value=a.id,class:g(["px-4 py-2 rounded-t-lg font-medium transition-colors",s.value===a.id?"bg-gradient-to-br from-amber-400 to-orange-400 text-white":"text-neutral-600 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800"])},l(a.label),11,A)),64))])]),e("div",D,[b.value?(n(),o("div",M,[...r[1]||(r[1]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e("p",{class:"text-neutral-600 dark:text-neutral-400"},"Loading leaderboard...")],-1)])])):d.value?(n(),o("div",W,[e("div",Y,[e("div",I," #"+l(d.value),1),e("div",O,[r[2]||(r[2]=e("div",{class:"font-semibold text-neutral-900 dark:text-neutral-100"},"Your Rank",-1)),e("div",G,l(_.value),1)]),e("div",H,[e("div",J,l(c.value),1),r[3]||(r[3]=e("div",{class:"text-xs text-neutral-600 dark:text-neutral-400"},"points",-1))])])])):m("",!0),e("div",K,[(n(!0),o(h,null,p(i.value,a=>(n(),o("div",{key:a.userId,class:g(["bg-white dark:bg-neutral-900 rounded-xl p-4 border border-neutral-200 dark:border-neutral-800 transition-all",a.isCurrentUser?"ring-2 ring-amber-400 dark:ring-amber-600":""])},[e("div",P,[e("div",{class:g(["rounded-full w-10 h-10 flex items-center justify-center font-bold text-sm",L(a.rank)])},l(a.rank<=3?C(a.rank):`#${a.rank}`),3),e("div",Q,[e("div",X,[q(l(a.username)+" ",1),a.isCurrentUser?(n(),o("span",Z,"(You)")):m("",!0)]),s.value==="allTime"?(n(),o("div",ee,l(a.quizzesTaken)+" quizzes â€¢ Level "+l(a.level),1)):s.value==="weekly"?(n(),o("div",te,l(a.quizzesTaken)+" quizzes this week ",1)):m("",!0)]),e("div",ae,[e("div",re,l(s.value==="daily"?a.score||0:a.totalScore||0),1),r[4]||(r[4]=e("div",{class:"text-xs text-neutral-600 dark:text-neutral-400"},"points",-1))])])],2))),128))]),!b.value&&i.value.length===0?(n(),o("div",se,[f(k,{name:"trophy",size:"xl",class:"text-neutral-400 dark:text-neutral-600 mx-auto mb-4"}),e("p",le,l(T()),1),r[5]||(r[5]=e("p",{class:"text-sm text-neutral-500 dark:text-neutral-500"}," Complete quizzes to appear on the leaderboard! ",-1))])):m("",!0)])]))}};export{ce as default};
